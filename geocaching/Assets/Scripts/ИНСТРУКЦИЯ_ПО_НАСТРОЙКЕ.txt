═══════════════════════════════════════════════════════════════
ИНСТРУКЦИЯ ПО НАСТРОЙКЕ СКРИПТОВ
═══════════════════════════════════════════════════════════════

СТРУКТУРА ПАПОК:
  Assets/Scripts/
    ├── Player/                    (скрипты игрока)
    │   ├── SprintRhythmController.cs
    │   ├── PlayerStateManager.cs
    │   └── ObstacleInteractionHandler.cs
    │
    └── Obstacles/                 (скрипты препятствий)
        ├── ObstacleSpeedColor.cs
        └── ObstacleTrigger.cs

═══════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────────────────┐
│ 1. НАСТРОЙКА ИГРОКА (GameObject с тегом "Player")          │
└─────────────────────────────────────────────────────────────┘

Добавьте на GameObject игрока следующие компоненты:

  ✓ SprintRhythmController
    └─ Уже должен быть установлен
    └─ Поля для заполнения:
       • Speed Slider - перетащите слайдер для отображения текущей скорости
       • Green Zone Slider - перетащите слайдер для границы зелёной зоны
       • Yellow Zone Slider - перетащите слайдер для границы жёлтой зоны
       • Red Zone Slider - перетащите слайдер для границы красной зоны
       • Obstacle Speed Color - ОПЦИОНАЛЬНО (для тестового вызова по клавише A)
         └─ Можно оставить пустым, если не используете тестовый вызов

  ✓ PlayerStateManager (НОВЫЙ)
    └─ Добавьте компонент: Add Component → Gameplay → Player State Manager
    └─ Поля НЕ требуют заполнения (всё работает автоматически)
    └─ Можно настроить длительности:
       • Stumbling Duration = 2 сек (по умолчанию)
       • Falling Duration = 3 сек (по умолчанию)

  ✓ ObstacleInteractionHandler (НОВЫЙ)
    └─ Добавьте компонент: Add Component → Gameplay → Obstacle Interaction Handler
    └─ Поля для заполнения:
       • Player State Manager - перетащите компонент PlayerStateManager с этого же объекта
         └─ Если оставить пустым, скрипт попытается найти его автоматически
       • Interaction Key = Space (по умолчанию) - можно изменить

  ✓ Collider (НЕ триггер)
    └─ Убедитесь, что у игрока есть Collider
    └─ isTrigger должен быть ВЫКЛЮЧЕН (false)

  ✓ Тег "Player"
    └─ Убедитесь, что GameObject игрока имеет тег "Player"
    └─ Если тег другой, измените поле "Player Tag" в ObstacleTrigger на препятствиях


┌─────────────────────────────────────────────────────────────┐
│ 2. НАСТРОЙКА ПРЕПЯТСТВИЯ                                     │
└─────────────────────────────────────────────────────────────┘

Добавьте на GameObject препятствия следующие компоненты:

  ✓ ObstacleSpeedColorDiscrete
    └─ Уже должен быть установлен
    └─ Поля для заполнения:
       • Target Renderer - перетащите компонент Renderer (MeshRenderer) препятствия
       • Use Static Access = true (рекомендуется)
       • Green End = 0.33 (граница зелёной зоны, 0-1)
       • Yellow End = 0.66 (граница жёлтой зоны, 0-1)
       • Green Color, Yellow Color, Red Color - настройте цвета зон

  ✓ ObstacleTrigger (НОВЫЙ)
    └─ Добавьте компонент: Add Component → Gameplay → Obstacle Trigger
    └─ Поля для заполнения:
       • Trigger Collider - перетащите компонент Collider с этого же объекта
         └─ Если оставить пустым, скрипт попытается найти его автоматически
         └─ Если коллайдер не найден, в консоль выведется ошибка с именем объекта
       • Obstacle Speed Color - перетащите компонент ObstacleSpeedColorDiscrete с этого же объекта
         └─ Если оставить пустым, скрипт попытается найти его автоматически
       • Player Tag = "Player" (по умолчанию)
         └─ Измените, если у игрока другой тег

  ✓ Collider (ТРИГГЕР)
    └─ Добавьте Collider на препятствие
    └─ ВАЖНО: isTrigger должен быть ВКЛЮЧЕН (true) ✓
    └─ Размер коллайдера должен покрывать зону взаимодействия
    └─ Перетащите этот Collider в поле "Trigger Collider" в ObstacleTrigger


┌─────────────────────────────────────────────────────────────┐
│ 3. НАСТРОЙКА UI (Canvas)                                    │
└─────────────────────────────────────────────────────────────┘

Создайте слайдеры для отображения скорости и зон:

  ✓ Speed Slider
    └─ Создайте UI → Slider
    └─ Перетащите в поле "Speed Slider" в SprintRhythmController

  ✓ Green Zone Slider
    └─ Создайте UI → Slider
    └─ Перетащите в поле "Green Zone Slider" в SprintRhythmController

  ✓ Yellow Zone Slider
    └─ Создайте UI → Slider
    └─ Перетащите в поле "Yellow Zone Slider" в SprintRhythmController

  ✓ Red Zone Slider
    └─ Создайте UI → Slider
    └─ Перетащите в поле "Red Zone Slider" в SprintRhythmController


┌─────────────────────────────────────────────────────────────┐
│ 4. ПРОВЕРКА НАСТРОЙКИ                                        │
└─────────────────────────────────────────────────────────────┘

После настройки проверьте:

  ✓ У игрока есть тег "Player"
  ✓ У игрока есть Collider (НЕ триггер)
  ✓ У препятствия есть Collider (триггер) ✓
  ✓ Все ссылки заполнены (если требуется)
  ✓ В консоли Unity нет ошибок при запуске игры

  Тестовые функции:
  • Клавиша ПРОБЕЛ - увеличивает скорость (нажатиями)
  • Клавиша A - тестовый вызов UpdateZoneBoundaries() (если указано препятствие)


┌─────────────────────────────────────────────────────────────┐
│ 5. ЛОГИКА РАБОТЫ                                             │
└─────────────────────────────────────────────────────────────┘

1. Игрок входит в триггер препятствия
   → Границы зон передаются в SprintRhythmController
   → Слайдеры зон обновляются

2. Игрок нажимает ПРОБЕЛ в зоне препятствия:
   • В жёлтой зоне → событие "СПОТЫКНУЛСЯ" → через 2 сек → "ПРИШЁЛ В СЕБЯ"
   • В красной зоне → событие "УПАЛ" → через 3 сек → "ПРИШЁЛ В СЕБЯ"
   • В зелёной зоне → ничего не происходит

3. Игрок выходит из триггера препятствия
   → Границы зон сбрасываются


═══════════════════════════════════════════════════════════════

